<div class="flex items-center gap-4 px-6 py-4 bg-white dark:bg-surface-900 border-b border-surface-200 dark:border-surface-800">
  <div class="flex-1 flex items-center gap-3 px-4 py-2.5 bg-surface-50 dark:bg-surface-800 border border-surface-200 dark:border-surface-700 rounded-xl transition-all duration-200 focus-within:border-accent focus-within:ring-2 focus-within:ring-accent/20 focus-within:bg-white dark:focus-within:bg-surface-900"
       [class.border-accent]="isSearching()"
       [class.ring-2]="isSearching()"
       [class.ring-accent/20]="isSearching()">
    @if (isSearching()) {
      <app-spinner [size]="18" />
    } @else {
      <app-icon name="search" [size]="18" class="text-surface-400 dark:text-surface-500 shrink-0" />
    }
    <input
      #searchInput
      type="text"
      class="flex-1 border-none bg-transparent text-sm font-medium text-surface-900 dark:text-surface-50 outline-none placeholder:text-surface-400 dark:placeholder:text-surface-500 placeholder:font-normal"
      placeholder="Search emails... (from:user subject:test date:2024)"
      [value]="searchValue()"
      (input)="onSearchInput(searchInput.value)">
    @if (searchValue()) {
      <button 
        class="flex items-center justify-center w-6 h-6 text-surface-400 dark:text-surface-500 bg-surface-200 dark:bg-surface-700 border-none rounded-full cursor-pointer transition-all duration-150 hover:bg-surface-300 dark:hover:bg-surface-600 hover:text-surface-600 dark:hover:text-surface-300"
        (click)="onClearSearch()">
        <app-icon name="close" [size]="12" />
      </button>
    }
  </div>
  @let resultsCount = searchResultsCount();
  @if (searchValue() && resultsCount !== null) {
    <span class="text-sm font-medium text-surface-500 dark:text-surface-400 whitespace-nowrap tabular-nums">
      @if (resultsCount > emailCount()) {
        <span class="text-accent">{{ emailCount() }}</span> of {{ resultsCount }}
      } @else {
        <span class="text-accent">{{ resultsCount }}</span> results
      }
    </span>
  }
</div>
