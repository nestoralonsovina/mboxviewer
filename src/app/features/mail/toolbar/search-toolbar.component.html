<div class="flex items-center gap-4 px-6 py-3 bg-white dark:bg-surface-900 border-b border-surface-200 dark:border-surface-800">
  <div class="flex-1 flex items-center gap-3 px-4 py-2 bg-surface-100 dark:bg-surface-800 rounded-lg">
    @if (isSearching()) {
      <app-spinner [size]="16" />
    } @else {
      <app-icon name="search" [size]="16" class="text-surface-400 dark:text-surface-500 shrink-0" />
    }
    <input
      #searchInput
      type="text"
      class="flex-1 bg-transparent text-sm text-surface-900 dark:text-surface-50 placeholder:text-surface-400 dark:placeholder:text-surface-500 border-0 outline-0 ring-0 shadow-none p-0 m-0"
      style="border: none; outline: none; box-shadow: none;"
      placeholder="Search emails..."
      [value]="searchValue()"
      (input)="onSearchInput(searchInput.value)">
    @if (searchValue()) {
      <button 
        class="flex items-center justify-center w-5 h-5 text-surface-400 dark:text-surface-500 bg-surface-200 dark:bg-surface-700 border-none rounded-full cursor-pointer hover:bg-surface-300 dark:hover:bg-surface-600"
        (click)="onClearSearch()">
        <app-icon name="close" [size]="10" />
      </button>
    }
  </div>
  @let resultsCount = searchResultsCount();
  @if (searchValue() && resultsCount !== null) {
    <span class="text-sm text-surface-500 dark:text-surface-400 whitespace-nowrap tabular-nums">
      <span class="text-accent font-medium">{{ resultsCount > emailCount() ? emailCount() : resultsCount }}</span>
      @if (resultsCount > emailCount()) {
        of {{ resultsCount }}
      } results
    </span>
  }
</div>
