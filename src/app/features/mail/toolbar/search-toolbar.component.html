<div class="flex items-center gap-3 px-4 py-3 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700">
  <div class="flex-1 flex items-center gap-2 px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg transition-colors focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500"
       [class.border-indigo-500]="isSearching()"
       [class.ring-1]="isSearching()"
       [class.ring-indigo-500]="isSearching()">
    @if (isSearching()) {
      <app-spinner [size]="18" />
    } @else {
      <app-icon name="search" [size]="18" class="text-slate-400 dark:text-slate-500 shrink-0" />
    }
    <input
      #searchInput
      type="text"
      class="flex-1 border-none bg-transparent text-sm text-slate-900 dark:text-slate-50 outline-none placeholder:text-slate-400 dark:placeholder:text-slate-500"
      placeholder="Search emails... (from:user subject:test date:2024)"
      [value]="searchValue()"
      (input)="onSearchInput(searchInput.value)">
    @if (searchValue()) {
      <button class="flex items-center justify-center p-1 text-slate-400 dark:text-slate-500 bg-transparent border-none cursor-pointer transition-colors hover:text-slate-600 dark:hover:text-slate-400"
              (click)="onClearSearch()">
        <app-icon name="close" />
      </button>
    }
  </div>
  @let resultsCount = searchResultsCount();
  @if (searchValue() && resultsCount !== null) {
    <span class="text-[13px] text-slate-600 dark:text-slate-400 whitespace-nowrap">
      @if (resultsCount > emailCount()) {
        {{ emailCount() }} of {{ resultsCount }} results
      } @else {
        {{ resultsCount }} results
      }
    </span>
  }
</div>
