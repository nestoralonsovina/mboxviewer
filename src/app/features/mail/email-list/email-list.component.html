@if (searchQuery()) {
  <div class="px-4 py-2.5 text-xs font-semibold text-surface-600 dark:text-surface-400 bg-surface-50 dark:bg-surface-800/50 border-b border-surface-200 dark:border-surface-800">
    <span class="text-accent">{{ emails().length }}</span> {{ 'SEARCH.RESULTS_FOR' | translate }} "<span class="text-surface-900 dark:text-surface-200">{{ searchQuery() }}</span>"
  </div>
}
@if (selectedLabel()) {
  <div class="px-4 py-2.5 text-xs font-semibold text-surface-600 dark:text-surface-400 bg-surface-50 dark:bg-surface-800/50 border-b border-surface-200 dark:border-surface-800">
    <span class="inline-flex items-center gap-1.5">
      <app-icon name="tag" [size]="12" />
      {{ selectedLabel() }}
    </span>
    <span class="text-surface-400 dark:text-surface-500 ml-1">({{ emails().length }})</span>
  </div>
}

@if (isLoading() && emails().length === 0) {
  <div class="flex flex-col items-center justify-center gap-4 p-16 text-surface-400 dark:text-surface-500">
    <app-spinner />
    <span class="text-sm font-medium">{{ 'EMAIL_LIST.LOADING' | translate }}</span>
  </div>
}

<div class="divide-y divide-surface-100 dark:divide-surface-800">
  @for (email of emails(); track email.index) {
    <app-email-item
      [email]="email"
      [selected]="isSelected(email)"
      (emailClick)="onEmailClick($event)" />
  }
</div>

@if (isLoadingMore()) {
  <div class="flex items-center justify-center gap-2 py-4 text-surface-400 dark:text-surface-500">
    <app-spinner [size]="14" />
    <span class="text-sm font-medium">{{ 'EMAIL_LIST.LOADING_MORE' | translate }}</span>
  </div>
}

@if (!isLoading() && emails().length === 0) {
  <div class="flex flex-col items-center justify-center gap-4 p-16 text-surface-400 dark:text-surface-500">
    <div class="w-16 h-16 flex items-center justify-center bg-surface-100 dark:bg-surface-800 rounded-2xl">
      <app-icon name="mail" [size]="32" [strokeWidth]="1.5" />
    </div>
    <p class="text-sm font-medium">{{ 'EMAIL_LIST.NO_EMAILS' | translate }}</p>
  </div>
}
