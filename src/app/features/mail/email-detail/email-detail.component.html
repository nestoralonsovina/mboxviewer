<div class="flex-1 flex flex-col overflow-hidden bg-white dark:bg-slate-900">
  <div class="flex items-center px-4 py-3 border-b border-slate-200 dark:border-slate-700">
    <button
      class="flex items-center gap-2 px-3 py-2 text-sm text-slate-600 dark:text-slate-400 bg-transparent border border-slate-200 dark:border-slate-700 rounded cursor-pointer transition-all duration-150 hover:text-slate-900 dark:hover:text-slate-50 hover:bg-slate-100 dark:hover:bg-slate-800"
      (click)="onClose()">
      <app-icon name="arrow-left" [size]="20" />
      Back
    </button>
  </div>

  <div class="flex-1 overflow-y-auto p-6">
    @let currentEmail = email();
    <h2 class="text-xl font-semibold text-slate-900 dark:text-slate-50 mb-4 mt-0">{{ currentEmail.subject || '(No subject)' }}</h2>

    <app-email-meta [email]="currentEmail" />

    @let body = emailBody();
    @if (body) {
      <app-attachments-list
        [attachments]="body.attachments"
        (downloadAttachment)="onDownloadAttachment($event)" />
    }

    <app-email-body
      [body]="body"
      [isLoading]="isLoading()" />
  </div>
</div>
